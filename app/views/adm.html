<!--
//
// Webble World 3.0 (IntelligentPad system for the web)
//
// Copyright (c) 2010-2015 Micke Nicander Kuwahara, Giannis Georgalis, Yuzuru Tanaka
//     in Meme Media R&D Group of Hokkaido University, Japan. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//
// Additional restrictions may apply. See the LICENSE file for more information.
//

-->

<!--
    - Implements the User Interface structure of the "Admin interface"

@author Giannis Georgalis <jgeorgal@meme.hokudai.ac.jp>
-->
<div class="container-fluid closeable">

	<!-- Server management -->
	<!----------------------------------------------------------------->

	<h1 translate>Administrator's Den</h1>

	<!-- The eternal spinning wheel of misfortune -->
	<!----------------------------------------------------------------->

	<div class="loading-frame well well-lg" ng-if="updating">
		<div  class="loading-image">
			<div id="bowlG">
				<div id="bowl_ringG">
					<div class="ball_holderG">
						<div class="ballG"></div>
					</div>
				</div>
			</div>
		</div>
		<h1 class="loading-text"><span translate>Waiting for the server to respond...</span></h1>
	</div>

	<!-- Administrative Actions tab -->
	<!----------------------------------------------------------------->

	<uib-tabset class="padcontent" ng-hide="updating">

		<!-- Server management -->
		<!------------------------------------------------------------->

		<uib-tab active="tabs.server">
			<uib-tab-heading><i class="fa fa-automobile"></i> <span translate>Server Management</span></uib-tab-heading>

			<form nonvalidate class="padcontent">

				<div class="form-group" ng-show="updateOutput">
					<label for="updateOutput" class="control-label col-xs-1" translate>Output</label>
					<div class="col-xs-12 col-md-10">
						<textarea id="updateOutput" class="formitem" style="height:400px;" readonly>{{updateOutput}}</textarea>
					</div>
				</div>

				<div class="form-group" ng-hide="updateOutput">
					<div class="btn-group col-md-offset-1">
						<button ng-click="updateApp()" ng-disabled="updating" class="btn btn-primary"><i class="fa fa-refresh"></i> <span translate>Update Application</span></button>
					</div>
				</div>

			</form>
		</uib-tab>

		<!-- User management -->
		<!------------------------------------------------------------->

		<uib-tab active="tabs.users">
			<uib-tab-heading><i class="fa fa-users"></i> <span translate>User Accounts</span></uib-tab-heading>

			<div class="container-fluid padcontent">

				<div class="row">
					<h3 translate>All User Accounts</h3>
					<ul ng-repeat="u in allUsers">
						<li>
							<span class="fa fa-user"></span> <b>{{u.name.full}}</b> • {{u.email}} • <i>{{u.username || 'n/a'}}</i> •
							<div ng-repeat="p in u.auth_providers" class="label label-info">{{p}}</div>
						</li>
					</ul>

				</div>

			</div>
		</uib-tab>

		<!-- Session management -->
		<!------------------------------------------------------------->

		<uib-tab active="tabs.sessions">
			<uib-tab-heading><i class="fa fa-sign-in"></i> <span translate>Active Sessions</span></uib-tab-heading>

			<div class="container-fluid padcontent">

				<div class="row">
					<h3 translate>Online Users</h3>
					<ul ng-repeat="s in allSessions">
						<li><span class="fa fa-envelope"></span> {{s.user || 'Unknown'}}</li>
					</ul>

				</div>

			</div>
		</uib-tab>

	</uib-tabset>

</div>
